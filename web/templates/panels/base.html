{% load static %}
{% load i18n %}
<!doctype html>
<!-- FILE: web/templates/panels/base.html -->
<!-- DATE: 2025-12-21 -->
<html lang="ru">
<head>
  <meta charset="utf-8">
  <title>{{ page_title|default:"" }} - Serenity Mailer</title>

  <link rel="icon" href="{% static 'img/favicon.ico' %}" />

<script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="{% static 'css/panel.css' %}">
</head>

<body class="min-h-screen bg-[#f9fafb]">
  
<div id="yy-global-loading" class="yy-loading hidden" aria-hidden="true">
  <div class="yy-loading__backdrop"></div>
  <div class="yy-loading__box" role="status" aria-live="polite" aria-label="Loading">
    <div class="yy-loading__spinner"></div>
  </div>
</div>

<svg xmlns="http://www.w3.org/2000/svg" class="hidden">
  <symbol id="icon-arrow-circle" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
    <path stroke-linecap="round" stroke-linejoin="round"
          d="m12.75 15 3-3m0 0-3-3m3 3h-7.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"/>
  </symbol>
</svg>

<div class="h-screen flex overflow-hidden">

  <!-- SIDEBAR -->
<aside id="panel-sidebar"
       class="w-[320px] shrink-0 bg-white border border-[#71d0f4] border-t-0 !border-t-0 flex flex-col">

    <div class="h-16 px-6 flex items-center border-b border-[#71d0f4] border-t-0 justify-center">
      <a href="/">
        <img src="{% static 'img/logo.main.svg' %}" alt="Serenity" class="h-6 w-auto">
      </a>
    </div>

    <nav class="px-4 pt-10 space-y-3">
      {% for sec in panel_menu %}
      <details {% if sec.open %}open{% endif %} class="YY-MENU-CARD-BLUE">
        <summary class="YY-MENU-SUMMARY">
          {{ sec.title }}
        </summary>

        <div class="px-0">
          {% for it in sec.items %}
          <a href="{{ it.url }}"
             class="YY-MENU-DETAIL {% if it.active %}YY-MENU-DETAIL-ACTIVE{% endif %}">
            {{ it.title }}
          </a>
          {% endfor %}
        </div>
      </details>
      {% endfor %}
    </nav>

    <div class="mt-auto p-4 border-t border-[#71d0f4]">

    <details class="YY-MENU-CARD-BLUE">
        <summary class="YY-MENU-SUMMARY">
            {% if request.user.is_authenticated %}
              {{ request.user.username }}
            {% endif %}
        </summary>
    </details>
    </div>
  </aside>

  <!-- MAIN -->
  <div class="flex-1 min-w-0 min-h-0 flex flex-col">

    <!-- TOPBAR -->
    <header class="h-16 bg-white border-b border-[#71d0f4] flex items-center">
      <table class="YY-MAIN_TABLE_TOP mt-0 mb-0">
        <tr>
          <td class="YY-MAIN_TOP_LEFT_TD w-1/2">
            <div class="flex items-center gap-4">
              <button
                type="button"
                data-sidebar-toggle
                class="YY-BUTTON_MAIN mr-4">
                ☰
              </button>

              <span class="text-[#006991] font-semibold uppercase text-[22px] pt-1">
                {{ page_title|default:"" }}
              </span>
            </div>
          </td>

          <td class="YY-MAIN_TOP_RIGHT_TD w-1/2">
            <div class="flex items-center justify-end gap-3">

              <form method="post" action="{% url 'set_language' %}" class="flex items-center gap-2">
                {% csrf_token %}
                <input type="hidden" name="next" value="{{ request.get_full_path }}">

                <button type="submit" name="language" value="de"
                  class="YY-BUTTON_MAIN">
                  DEU
                </button>

                <button type="submit" name="language" value="uk"
                  class="YY-BUTTON_MAIN">
                  UKR
                </button>

                <button type="submit" name="language" value="ru"
                  class="YY-BUTTON_MAIN">
                  RUS
                </button>
                <button type="submit" name="language" value="en"
                  class="YY-BUTTON_MAIN">
                  ENG
                </button>                
              </form>

              <form method="post" action="{% url 'logout' %}" class="inline">
                {% csrf_token %}
                <button
                  type="submit"
                  class="YY-BUTTON_MAIN ml-6">
                  {% trans "Выйти" %}
                </button>
              </form>

            </div>
          </td>
        </tr>
      </table>
    </header>

    <main class="flex-1 min-h-0 overflow-y-auto">
      {% block content %}{% endblock %}
    </main>

  </div>
</div>
<script src="{% static 'js/script.js' %}"></script>
</body>
</html>
